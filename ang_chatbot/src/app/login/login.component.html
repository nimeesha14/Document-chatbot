<main class="form-signin">
    <form [formGroup]="loginForm" (submit)="submit()">
        <h1 class="h3 mb-3 fw-normal">Please Login</h1>

        <div class="alert alert-danger" *ngIf="error">
            <ul class="mb-0 list-unstyled">
                <li>{{ error }}</li>
            </ul>
        </div>

        <div class="form-group mb-3">
            <input type="email" 
                   formControlName="email" 
                   class="form-control" 
                   placeholder="Email"
                   [class.is-invalid]="submitted && loginForm.get('email')?.invalid">
            <div class="invalid-feedback" *ngIf="submitted && loginForm.get('email')?.errors">
                <ul class="mb-0 list-unstyled">
                    <li>Email is required</li>
                </ul>
            </div>
        </div>

        <div class="form-group mb-3 password-field">
            <input [type]="showPassword ? 'text' : 'password'"
                   formControlName="password" 
                   class="form-control" 
                   placeholder="Password"
                   [class.is-invalid]="submitted && loginForm.get('password')?.invalid">
            <button type="button" 
                    class="password-toggle"
                    (click)="togglePasswordVisibility()">
                <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
            </button>
            <div class="invalid-feedback" *ngIf="submitted && loginForm.get('password')?.errors">
                <ul class="mb-0 list-unstyled">
                    <li>Password is required</li>
                </ul>
            </div>
        </div>

        <button class="w-100 btn btn-lg btn-primary" type="submit" [disabled]="loading">
            <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>
            Login
        </button>

        <div class="mt-3 text-center">
            <p>Don't have an account? <a routerLink="/register">Register here</a></p>
        </div>
    </form>
</main>
